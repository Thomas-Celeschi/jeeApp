/*C8*/SET SCHEMA PUBLIC
drop table if exists car cascade 
drop table if exists comment cascade 
drop table if exists cv cascade 
drop table if exists licenceue cascade 
drop table if exists masterue cascade 
drop table if exists movie cascade 
drop table if exists person_movie cascade 
drop table if exists post cascade 
drop table if exists tperson cascade 
drop table if exists ue cascade 
drop table if exists user cascade 
drop sequence cv_seq if exists
drop sequence movie_seq if exists
drop sequence tperson_seq if exists
create sequence cv_seq start with 1 increment by 50
create sequence movie_seq start with 1 increment by 50
create sequence tperson_seq start with 1 increment by 50
create table car (owner_id bigint, immatriculation varchar(255) not null, model varchar(255) not null, primary key (immatriculation))
create table comment (id bigint generated by default as identity (start with 1), post_id bigint, user_id bigint, reply varchar(255), primary key (id))
create table cv (id bigint not null, title varchar(255) not null, primary key (id))
create table licenceue (ects integer, code varchar(255) not null, description varchar(255), primary key (code))
create table masterue (ects integer, code varchar(255) not null, master_name varchar(255), primary key (code))
create table movie (id bigint not null, name varchar(255) not null, primary key (id))
create table person_movie (id_movie bigint not null, id_person bigint not null, primary key (id_movie, id_person))
create table post (id bigint generated by default as identity (start with 1), user_id bigint, subject varchar(255), primary key (id))
create table tperson (birth_day date, cv_id bigint unique, id bigint not null, version bigint not null, second_name varchar(100) unique, first_name varchar(200) not null, city varchar(255), city_2 varchar(255), country varchar(255), country_2 varchar(255), street varchar(255), street_2 varchar(255), primary key (id), constraint UKhmka1mrapu493w0ow6alm6soq unique (first_name, birth_day))
create table ue (ects integer, code varchar(255) not null, primary key (code))
create table user (id bigint generated by default as identity (start with 1), email varchar(255), name varchar(255), primary key (id))
alter table car add constraint FKe726rtcbnla8lkst1cgax6rw8 foreign key (owner_id) references tperson
alter table comment add constraint FKs1slvnkuemjsq2kj4h3vhx7i1 foreign key (post_id) references post
alter table comment add constraint FK8kcum44fvpupyw6f5baccx25c foreign key (user_id) references user
alter table person_movie add constraint FK9b5o1mouw8srk7ghybr6laf21 foreign key (id_movie) references movie
alter table person_movie add constraint FK2c12mts111u1rh4nnh5acwu1y foreign key (id_person) references tperson
alter table post add constraint FK72mt33dhhs48hf9gcqrq4fxte foreign key (user_id) references user
alter table tperson add constraint FKjsw12wl1eo4wkrvw9q1eouny1 foreign key (cv_id) references cv
create table if not exists NAME ( id integer not null,  name varchar(50) not null,  primary key (id) )
create table if not exists NAME ( id integer not null,  name varchar(50) not null,  primary key (id) )
/*C13*/SET SCHEMA PUBLIC
\u000d\u000a    drop table if exists Car cascade 
\u000d\u000a    drop table if exists Comment cascade 
\u000d\u000a    drop table if exists CV cascade 
\u000d\u000a    drop table if exists LicenceUE cascade 
\u000d\u000a    drop table if exists MasterUE cascade 
\u000d\u000a    drop table if exists Movie cascade 
\u000d\u000a    drop table if exists Person_Movie cascade 
\u000d\u000a    drop table if exists Post cascade 
\u000d\u000a    drop table if exists TPerson cascade 
\u000d\u000a    drop table if exists UE cascade 
\u000d\u000a    drop table if exists User cascade 
\u000d\u000a    drop sequence CV_SEQ if exists
\u000d\u000a    drop sequence Movie_SEQ if exists
\u000d\u000a    drop sequence TPerson_SEQ if exists
\u000d\u000a    create sequence CV_SEQ start with 1 increment by 50
\u000d\u000a    create sequence Movie_SEQ start with 1 increment by 50
\u000d\u000a    create sequence TPerson_SEQ start with 1 increment by 50
\u000d\u000a    create table Car (\u000d\u000a        owner_id bigint,\u000d\u000a        immatriculation varchar(255) not null,\u000d\u000a        model varchar(255) not null,\u000d\u000a        primary key (immatriculation)\u000d\u000a    )
\u000d\u000a    create table Comment (\u000d\u000a        id bigint generated by default as identity (start with 1),\u000d\u000a        post_id bigint,\u000d\u000a        user_id bigint,\u000d\u000a        reply varchar(255),\u000d\u000a        primary key (id)\u000d\u000a    )
\u000d\u000a    create table CV (\u000d\u000a        id bigint not null,\u000d\u000a        title varchar(255) not null,\u000d\u000a        primary key (id)\u000d\u000a    )
\u000d\u000a    create table LicenceUE (\u000d\u000a        ects integer,\u000d\u000a        code varchar(255) not null,\u000d\u000a        description varchar(255),\u000d\u000a        primary key (code)\u000d\u000a    )
\u000d\u000a    create table MasterUE (\u000d\u000a        ects integer,\u000d\u000a        code varchar(255) not null,\u000d\u000a        master_name varchar(255),\u000d\u000a        primary key (code)\u000d\u000a    )
\u000d\u000a    create table Movie (\u000d\u000a        id bigint not null,\u000d\u000a        name varchar(255) not null,\u000d\u000a        primary key (id)\u000d\u000a    )
\u000d\u000a    create table Person_Movie (\u000d\u000a        id_movie bigint not null,\u000d\u000a        id_person bigint not null,\u000d\u000a        primary key (id_movie, id_person)\u000d\u000a    )
\u000d\u000a    create table Post (\u000d\u000a        id bigint generated by default as identity (start with 1),\u000d\u000a        user_id bigint,\u000d\u000a        subject varchar(255),\u000d\u000a        primary key (id)\u000d\u000a    )
\u000d\u000a    create table TPerson (\u000d\u000a        birth_day date,\u000d\u000a        cv_id bigint unique,\u000d\u000a        id bigint not null,\u000d\u000a        version bigint not null,\u000d\u000a        second_name varchar(100) unique,\u000d\u000a        first_name varchar(200) not null,\u000d\u000a        city varchar(255),\u000d\u000a        city_2 varchar(255),\u000d\u000a        country varchar(255),\u000d\u000a        country_2 varchar(255),\u000d\u000a        street varchar(255),\u000d\u000a        street_2 varchar(255),\u000d\u000a        primary key (id),\u000d\u000a        constraint UK58gbcq3p83fgxehg706edmoun unique (first_name, birth_day)\u000d\u000a    )
\u000d\u000a    create table UE (\u000d\u000a        ects integer,\u000d\u000a        code varchar(255) not null,\u000d\u000a        primary key (code)\u000d\u000a    )
\u000d\u000a    create table User (\u000d\u000a        id bigint generated by default as identity (start with 1),\u000d\u000a        email varchar(255),\u000d\u000a        name varchar(255),\u000d\u000a        primary key (id)\u000d\u000a    )
\u000d\u000a    alter table Car \u000d\u000a       add constraint FKidcym2fngsaap8n43vk7uvpw6 \u000d\u000a       foreign key (owner_id) \u000d\u000a       references TPerson
\u000d\u000a    alter table Comment \u000d\u000a       add constraint FKqb0rnht649ifuh6gev5lwvx8x \u000d\u000a       foreign key (post_id) \u000d\u000a       references Post
\u000d\u000a    alter table Comment \u000d\u000a       add constraint FKhlbnnmiua9xpvfq8y1u1a15ie \u000d\u000a       foreign key (user_id) \u000d\u000a       references User
\u000d\u000a    alter table Person_Movie \u000d\u000a       add constraint FK7466dlyofm4apb9n3qfuqmv1o \u000d\u000a       foreign key (id_movie) \u000d\u000a       references Movie
\u000d\u000a    alter table Person_Movie \u000d\u000a       add constraint FKph2gv8lpnj27l3c86kxh5q7g8 \u000d\u000a       foreign key (id_person) \u000d\u000a       references TPerson
\u000d\u000a    alter table Post \u000d\u000a       add constraint FKg7x75nqlmhufeeoxcuh22awxx \u000d\u000a       foreign key (user_id) \u000d\u000a       references User
\u000d\u000a    alter table TPerson \u000d\u000a       add constraint FK3o40ldp4hkjbdhkvk2rj2f6gn \u000d\u000a       foreign key (cv_id) \u000d\u000a       references CV
/*C8*/INSERT INTO USER VALUES(1,'thomas.celeschi@gmail.com','Thomas')
COMMIT
INSERT INTO USER VALUES(2,'','')
COMMIT
INSERT INTO USER VALUES(3,'','')
COMMIT
INSERT INTO POST VALUES(1,1,'Il fait beau')
COMMIT
INSERT INTO POST VALUES(2,1,'Su-per')
COMMIT
INSERT INTO POST VALUES(3,1,'')
COMMIT
INSERT INTO POST VALUES(4,2,'')
COMMIT
INSERT INTO POST VALUES(5,2,'')
COMMIT
INSERT INTO POST VALUES(6,2,'')
COMMIT
INSERT INTO POST VALUES(7,3,'')
COMMIT
INSERT INTO POST VALUES(8,3,'')
COMMIT
INSERT INTO POST VALUES(9,3,'')
COMMIT
INSERT INTO COMMENT VALUES(1,1,2,'Pas mal')
COMMIT
INSERT INTO COMMENT VALUES(2,1,2,'La vid\u00e9o')
COMMIT
INSERT INTO COMMENT VALUES(3,1,3,'Je like')
COMMIT
INSERT INTO COMMENT VALUES(4,2,1,'Super')
COMMIT
INSERT INTO COMMENT VALUES(5,2,2,'')
COMMIT
INSERT INTO COMMENT VALUES(6,2,2,'')
COMMIT
INSERT INTO COMMENT VALUES(7,3,3,'')
COMMIT
INSERT INTO COMMENT VALUES(8,3,2,'')
COMMIT
INSERT INTO COMMENT VALUES(9,3,3,'')
COMMIT
INSERT INTO COMMENT VALUES(10,4,1,'')
COMMIT
INSERT INTO COMMENT VALUES(11,4,3,'')
COMMIT
INSERT INTO COMMENT VALUES(12,4,3,'')
COMMIT
INSERT INTO COMMENT VALUES(13,5,1,'')
COMMIT
INSERT INTO COMMENT VALUES(14,5,1,'')
COMMIT
INSERT INTO COMMENT VALUES(15,5,3,'')
COMMIT
INSERT INTO COMMENT VALUES(16,6,2,'')
COMMIT
INSERT INTO COMMENT VALUES(17,6,2,'')
COMMIT
INSERT INTO COMMENT VALUES(18,6,3,'')
COMMIT
INSERT INTO COMMENT VALUES(19,7,2,'')
COMMIT
INSERT INTO COMMENT VALUES(20,7,2,'')
COMMIT
INSERT INTO COMMENT VALUES(21,7,2,'')
COMMIT
INSERT INTO COMMENT VALUES(22,8,1,'')
COMMIT
INSERT INTO COMMENT VALUES(23,8,1,'')
COMMIT
INSERT INTO COMMENT VALUES(24,8,1,'')
COMMIT
INSERT INTO COMMENT VALUES(25,9,3,'')
COMMIT
INSERT INTO COMMENT VALUES(26,9,3,'')
COMMIT
INSERT INTO COMMENT VALUES(27,9,1,'')
COMMIT
/*C13*/DISCONNECT
/*C8*/drop table if exists car cascade 
drop table if exists comment cascade 
drop table if exists cv cascade 
drop table if exists licenceue cascade 
drop table if exists masterue cascade 
drop table if exists movie cascade 
drop table if exists person_movie cascade 
drop table if exists post cascade 
drop table if exists tperson cascade 
drop table if exists ue cascade 
drop table if exists user cascade 
drop sequence cv_seq if exists
drop sequence movie_seq if exists
drop sequence tperson_seq if exists
DISCONNECT
/*C9*/SET SCHEMA PUBLIC
DISCONNECT
/*C10*/SET SCHEMA PUBLIC
DISCONNECT
/*C11*/SET SCHEMA PUBLIC
DISCONNECT
/*C12*/SET SCHEMA PUBLIC
DISCONNECT
